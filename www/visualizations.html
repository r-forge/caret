


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
  <!--
  Design by Free CSS Templates
http://www.freecsstemplates.org
Released for free under a Creative Commons Attribution 2.5 License

Name       : Emerald 
Description: A two-column, fixed-width design with dark color scheme.
Version    : 1.0
Released   : 20120902

-->
  <html xmlns="http://www.w3.org/1999/xhtml">
  <head>
<style type="text/css">.knitr.inline {
  background-color: #f7f7f7;
  border:solid 1px #B0B0B0;
}
.error {
	font-weight: bold;
	color: #FF0000;
},
.warning {
	font-weight: bold;
}
.message {
	font-style: italic;
}
.source, .output, .warning, .error, .message {
	padding: 0em 1em;
  border:solid 1px #F7F7F7;
}
.source {
  background-color: #f5f5f5;
}
.rimage.left {
  text-align: left;
}
.rimage.right {
  text-align: right;
}
.rimage.center {
  text-align: center;
}
.hl.num {
  color: #AF0F91;
}
.hl.str {
  color: #317ECC;
}
.hl.com {
  color: #AD95AF;
  font-style: italic;
}
.hl.opt {
  color: #000000;
}
.hl.std {
  color: #585858;
}
.hl.kwa {
  color: #295F94;
  font-weight: bold;
}
.hl.kwb {
  color: #B05A65;
}
.hl.kwc {
  color: #55aa55;
}
.hl.kwd {
  color: #BC5A65;
  font-weight: bold;
}</style>
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>Visualizations</title>
  <link href='http://fonts.googleapis.com/css?family=Abel' rel='stylesheet' type='text/css'>
  <link href="style.css" rel="stylesheet" type="text/css" media="screen" />
  </head>
  <body>
  <div id="wrapper">
  <div id="header-wrapper" class="container">
  <div id="header" class="container">
  <div id="logo">
  <h1><a href="#">Visualizations</a></h1>
</div>
  <!--
  <div id="menu">
  <ul>
  <li class="current_page_item"><a href="#">Homepage</a></li>
<li><a href="#">Blog</a></li>
<li><a href="#">Photos</a></li>
<li><a href="#">About</a></li>
<li><a href="#">Contact</a></li>
</ul>
  </div>
  -->
  </div>
  <div><img src="images/img03.png" width="1000" height="40" alt="" /></div>
  </div>
  <!-- end #header -->
<div id="page">
  <div id="content">
  <p>
  The <span class="mx funCall">featurePlot</span> function is a wrapper for different
<a href="http://cran.r-project.org/web/packages/lattice/index.html"><strong>lattice</strong></a> plots to visualize the data. For example, the following figures show the default plot for continuous outcomes generated using the <span class="mx funCall">featurePlot</span> function. 
</p>
  <p>
  For classification data sets, the <code>iris</code> data are used for illustration.
</p>
<div class="chunk" id="mdrr"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">str</span><span class="hl std">(iris)</span>
</pre></div>
<div class="output"><pre class="knitr r">'data.frame':	150 obs. of  5 variables:
 $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
 $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
 $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
 $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
 $ Species     : Factor w/ 3 levels "setosa","versicolor",..: 1 1 1 1 1 1 1 1 1 1 ...
</pre></div>
</div></div>


<h1>Scatterplot Matrix</h1>

<div class="chunk" id="VisScatMat"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">library</span><span class="hl std">(AppliedPredictiveModeling)</span>
<span class="hl kwd">transparentTheme</span><span class="hl std">(</span><span class="hl kwc">trans</span> <span class="hl std">=</span> <span class="hl num">.4</span><span class="hl std">)</span>
<span class="hl kwd">library</span><span class="hl std">(caret)</span>
<span class="hl kwd">featurePlot</span><span class="hl std">(</span><span class="hl kwc">x</span> <span class="hl std">= iris[,</span> <span class="hl num">1</span><span class="hl opt">:</span><span class="hl num">4</span><span class="hl std">],</span>
            <span class="hl kwc">y</span> <span class="hl std">= iris</span><span class="hl opt">$</span><span class="hl std">Species,</span>
            <span class="hl kwc">plot</span> <span class="hl std">=</span> <span class="hl str">&quot;pairs&quot;</span><span class="hl std">,</span>
            <span class="hl com">## Add a key at the top</span>
            <span class="hl kwc">auto.key</span> <span class="hl std">=</span> <span class="hl kwd">list</span><span class="hl std">(</span><span class="hl kwc">columns</span> <span class="hl std">=</span> <span class="hl num">3</span><span class="hl std">))</span>
</pre></div>
</div><div class="rimage default"><img src="figure/VisScatMat.png" title="plot of chunk VisScatMat" alt="plot of chunk VisScatMat" class="plot" /></div></div>



<h1>Scatterplot Matrix with Ellipses</h1>

<div class="chunk" id="VisScatMatEl"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">featurePlot</span><span class="hl std">(</span><span class="hl kwc">x</span> <span class="hl std">= iris[,</span> <span class="hl num">1</span><span class="hl opt">:</span><span class="hl num">4</span><span class="hl std">],</span>
            <span class="hl kwc">y</span> <span class="hl std">= iris</span><span class="hl opt">$</span><span class="hl std">Species,</span>
            <span class="hl kwc">plot</span> <span class="hl std">=</span> <span class="hl str">&quot;ellipse&quot;</span><span class="hl std">,</span>
            <span class="hl com">## Add a key at the top</span>
            <span class="hl kwc">auto.key</span> <span class="hl std">=</span> <span class="hl kwd">list</span><span class="hl std">(</span><span class="hl kwc">columns</span> <span class="hl std">=</span> <span class="hl num">3</span><span class="hl std">))</span>
</pre></div>
</div><div class="rimage default"><img src="figure/VisScatMatEl.png" title="plot of chunk VisScatMatEl" alt="plot of chunk VisScatMatEl" class="plot" /></div></div>

    
<h1>Overlayed Density Plots</h1>

<div class="chunk" id="VisDens"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">transparentTheme</span><span class="hl std">(</span><span class="hl kwc">trans</span> <span class="hl std">=</span> <span class="hl num">.9</span><span class="hl std">)</span>
<span class="hl kwd">featurePlot</span><span class="hl std">(</span><span class="hl kwc">x</span> <span class="hl std">= iris[,</span> <span class="hl num">1</span><span class="hl opt">:</span><span class="hl num">4</span><span class="hl std">],</span>
                  <span class="hl kwc">y</span> <span class="hl std">= iris</span><span class="hl opt">$</span><span class="hl std">Species,</span>
                  <span class="hl kwc">plot</span> <span class="hl std">=</span> <span class="hl str">&quot;density&quot;</span><span class="hl std">,</span>
                  <span class="hl com">## Pass in options to xyplot() to </span>
                  <span class="hl com">## make it prettier</span>
                  <span class="hl kwc">scales</span> <span class="hl std">=</span> <span class="hl kwd">list</span><span class="hl std">(</span><span class="hl kwc">x</span> <span class="hl std">=</span> <span class="hl kwd">list</span><span class="hl std">(</span><span class="hl kwc">relation</span><span class="hl std">=</span><span class="hl str">&quot;free&quot;</span><span class="hl std">),</span>
                                <span class="hl kwc">y</span> <span class="hl std">=</span> <span class="hl kwd">list</span><span class="hl std">(</span><span class="hl kwc">relation</span><span class="hl std">=</span><span class="hl str">&quot;free&quot;</span><span class="hl std">)),</span>
                  <span class="hl kwc">adjust</span> <span class="hl std">=</span> <span class="hl num">1.5</span><span class="hl std">,</span>
                  <span class="hl kwc">pch</span> <span class="hl std">=</span> <span class="hl str">&quot;|&quot;</span><span class="hl std">,</span>
                  <span class="hl kwc">layout</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">4</span><span class="hl std">,</span> <span class="hl num">1</span><span class="hl std">),</span>
                  <span class="hl kwc">auto.key</span> <span class="hl std">=</span> <span class="hl kwd">list</span><span class="hl std">(</span><span class="hl kwc">columns</span> <span class="hl std">=</span> <span class="hl num">3</span><span class="hl std">))</span>
</pre></div>
</div><div class="rimage default"><img src="figure/VisDens.png" title="plot of chunk VisDens" alt="plot of chunk VisDens" class="plot" /></div></div>




<h1>Box Plots</h1>

<div class="chunk" id="ViBox"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">featurePlot</span><span class="hl std">(</span><span class="hl kwc">x</span> <span class="hl std">= iris[,</span> <span class="hl num">1</span><span class="hl opt">:</span><span class="hl num">4</span><span class="hl std">],</span>
                  <span class="hl kwc">y</span> <span class="hl std">= iris</span><span class="hl opt">$</span><span class="hl std">Species,</span>
                  <span class="hl kwc">plot</span> <span class="hl std">=</span> <span class="hl str">&quot;box&quot;</span><span class="hl std">,</span>
                  <span class="hl com">## Pass in options to bwplot() </span>
                  <span class="hl kwc">scales</span> <span class="hl std">=</span> <span class="hl kwd">list</span><span class="hl std">(</span><span class="hl kwc">y</span> <span class="hl std">=</span> <span class="hl kwd">list</span><span class="hl std">(</span><span class="hl kwc">relation</span><span class="hl std">=</span><span class="hl str">&quot;free&quot;</span><span class="hl std">),</span>
                                <span class="hl kwc">x</span> <span class="hl std">=</span> <span class="hl kwd">list</span><span class="hl std">(</span><span class="hl kwc">rot</span> <span class="hl std">=</span> <span class="hl num">90</span><span class="hl std">)),</span>
                  <span class="hl kwc">layout</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">4</span><span class="hl std">,</span><span class="hl num">1</span> <span class="hl std">),</span>
                  <span class="hl kwc">auto.key</span> <span class="hl std">=</span> <span class="hl kwd">list</span><span class="hl std">(</span><span class="hl kwc">columns</span> <span class="hl std">=</span> <span class="hl num">2</span><span class="hl std">))</span>
</pre></div>
</div><div class="rimage default"><img src="figure/ViBox.png" title="plot of chunk ViBox" alt="plot of chunk ViBox" class="plot" /></div></div>


<h1>Scatter Plots</h1>


  <p>For regression, the Boston Housing data is used:</p>
<div class="chunk" id="bbb"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">library</span><span class="hl std">(mlbench)</span>
<span class="hl kwd">data</span><span class="hl std">(BostonHousing)</span>
<span class="hl std">regVar</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;age&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;lstat&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;tax&quot;</span><span class="hl std">)</span>
<span class="hl kwd">str</span><span class="hl std">(BostonHousing[, regVar])</span>
</pre></div>
<div class="output"><pre class="knitr r">'data.frame':	506 obs. of  3 variables:
 $ age  : num  65.2 78.9 61.1 45.8 54.2 58.7 66.6 96.1 100 85.9 ...
 $ lstat: num  4.98 9.14 4.03 2.94 5.33 ...
 $ tax  : num  296 242 242 222 222 222 311 311 311 311 ...
</pre></div>
</div></div>


<p> When the predictors are continuous, <span class="mx funCall">featurePlot</span> can
be used to create scatter plots of each of the predictors with the
outcome. For example: </p>

<div class="chunk" id="VisScatter"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">theme1</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">trellis.par.get</span><span class="hl std">()</span>
<span class="hl std">theme1</span><span class="hl opt">$</span><span class="hl std">plot.symbol</span><span class="hl opt">$</span><span class="hl std">col</span> <span class="hl kwb">=</span> <span class="hl kwd">rgb</span><span class="hl std">(</span><span class="hl num">.2</span><span class="hl std">,</span> <span class="hl num">.2</span><span class="hl std">,</span> <span class="hl num">.2</span><span class="hl std">,</span> <span class="hl num">.4</span><span class="hl std">)</span>
<span class="hl std">theme1</span><span class="hl opt">$</span><span class="hl std">plot.symbol</span><span class="hl opt">$</span><span class="hl std">pch</span> <span class="hl kwb">=</span> <span class="hl num">16</span>
<span class="hl std">theme1</span><span class="hl opt">$</span><span class="hl std">plot.line</span><span class="hl opt">$</span><span class="hl std">col</span> <span class="hl kwb">=</span> <span class="hl kwd">rgb</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl std">,</span> <span class="hl num">0</span><span class="hl std">,</span> <span class="hl num">0</span><span class="hl std">,</span> <span class="hl num">.7</span><span class="hl std">)</span>
<span class="hl std">theme1</span><span class="hl opt">$</span><span class="hl std">plot.line</span><span class="hl opt">$</span><span class="hl std">lwd</span> <span class="hl kwb">&lt;-</span> <span class="hl num">2</span>
<span class="hl kwd">trellis.par.set</span><span class="hl std">(theme1)</span>
<span class="hl kwd">featurePlot</span><span class="hl std">(</span><span class="hl kwc">x</span> <span class="hl std">= BostonHousing[, regVar],</span>
            <span class="hl kwc">y</span> <span class="hl std">= BostonHousing</span><span class="hl opt">$</span><span class="hl std">medv,</span>
            <span class="hl kwc">plot</span> <span class="hl std">=</span> <span class="hl str">&quot;scatter&quot;</span><span class="hl std">,</span>
            <span class="hl kwc">layout</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">3</span><span class="hl std">,</span> <span class="hl num">1</span><span class="hl std">))</span>
</pre></div>
</div><div class="rimage default"><img src="figure/VisScatter.png" title="plot of chunk VisScatter" alt="plot of chunk VisScatter" class="plot" /></div></div>



  
<p>Note that the x-axis scales are different. The function
automatically uses 
<span class="mx funCall">scales</span><tt> = <span class="hl kwd">list</span><span class="hl std">(</span><span class="hl kwc">y</span> <span class="hl std">=</span> <span class="hl kwd">list</span><span class="hl std">(</span><span class="hl kwc">relation</span> <span class="hl std">=</span> <span class="hl str">&quot;free&quot;</span><span class="hl std">))</span></tt> 
so you don't have to add it. We can also
pass in options to the <a href="http://cran.r-project.org/web/packages/lattice/index.html"><strong>lattice</strong></a> function
<span class="mx funCall">xyplot</span>. For example, we can add a scatter plot smoother
by passing in new options:</p>

<div class="chunk" id="VisScatterSmooth"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">featurePlot</span><span class="hl std">(</span><span class="hl kwc">x</span> <span class="hl std">= BostonHousing[, regVar],</span>
            <span class="hl kwc">y</span> <span class="hl std">= BostonHousing</span><span class="hl opt">$</span><span class="hl std">medv,</span>
            <span class="hl kwc">plot</span> <span class="hl std">=</span> <span class="hl str">&quot;scatter&quot;</span><span class="hl std">,</span>
            <span class="hl kwc">type</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;p&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;smooth&quot;</span><span class="hl std">),</span>
            <span class="hl kwc">span</span> <span class="hl std">=</span> <span class="hl num">.5</span><span class="hl std">,</span>
            <span class="hl kwc">layout</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">3</span><span class="hl std">,</span> <span class="hl num">1</span><span class="hl std">))</span>
</pre></div>
</div><div class="rimage default"><img src="figure/VisScatterSmooth.png" title="plot of chunk VisScatterSmooth" alt="plot of chunk VisScatterSmooth" class="plot" /></div></div>


            
<p>The options <span class="mx arg">degree</span> and <span class="mx arg">span</span> control the
smoothness of the smoother.</p>





<div style="clear: both;">&nbsp;</div>
  </div>
  <!-- end #content -->
<div id="sidebar">
  <ul>
  <li>
  <h2>Links</h2>
  <p><a href="modelList.html"><tt>train</tt> Model List</a></p>
  </li>
  <li>
  <h2>Topics</h2>
  <ul>
      	<li><a href="index.html">Main Page</a></li>
  		<li><a href="datasets.html">Data Sets</a></li>
                <li><a href="visualizations.html">Visualizations</a></li>
                <li><a href="preprocess.html">Pre-Processing</a></li>
                <li><a href="splitting.html">Data Splitting</a></li>
                <li><a href="misc.html">Miscellaneous Model Functions</a></li>
                <li><a href="training.html">Model Training and Tuning</a></li>
                <li><a href="modelList.html"><tt>train</tt> Model List</a></li>
                 <li><a href="bytag.html"><tt>train</tt> Models By Tag</a></li>
                 <li><a href="similarity.html"><tt>train</tt> Models By Similarity</a></li>
                <li><a href="custom_models.html">Using Custom Models</a></li>
                <li><a href="varimp.html">Variable Importance</a></li>
                <li><a href="featureselection.html">Feature Selection</a></li>
                <li><a href="other.html">Other Functions</a></li>
                <li><a href="parallel.html">Parallel Processing</a></li>
                <li><a href="adaptive.html">Adaptive Resampling</a></li> 
</ul>
  </li>
  </ul>
  </div>
  <!-- end #sidebar -->
<div style="clear: both;">&nbsp;</div>
  </div>
  <div class="container"><img src="images/img03.png" width="1000" height="40" alt="" /></div>
  <!-- end #page -->
</div>
  <div id="footer-content"></div>
  <div id="footer">


  <p>Created on Sat May 31 2014 using caret version 6.0-29 and R version 3.0.3 (2014-03-06).</p>
  </div>
  <!-- end #footer -->
</body>
  </html>
